@* @page "/"
@namespace DxBlazorReport.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<component type="typeof(App)" render-mode="ServerPrerendered" /> *@

@page "/"
@namespace DxBlazorReport.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

@*<component type="typeof(App)" render-mode="ServerPrerendered" />*@

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JadeB Dashboard</title>
    <base href="~/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link href="css/site.css" rel="stylesheet" />

    <link href="_content/DevExpress.Blazor.Dashboard/dx.light.css" rel="stylesheet" />
    <link href="_content/DevExpress.Blazor.Dashboard/dx-analytics.common.css" rel="stylesheet" />
    <link href="_content/DevExpress.Blazor.Dashboard/dx-analytics.light.css" rel="stylesheet" />
    <link href="_content/DevExpress.Blazor.Dashboard/dx-querybuilder.css" rel="stylesheet" />
    <link href="_content/DevExpress.Blazor.Dashboard/dx-dashboard.light.min.css" rel="stylesheet" />

    <!-- For Dashboard Refresh -->
    <script src="dashboard-events-scripts.js"></script>

    <!-- Reload the page to restore functionality -->
    <!-- https://learn.microsoft.com/en-us/answers/questions/1613062/reload-the-page-to-restore-functionality-blazor-se -->
    <!-- https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/signalr?view=aspnetcore-7.0#automatically-refresh-the-page-when-server-side-reconnection-fails -->
    @*<script src="_framework/blazor.server.js" autostart="false"></script>
    <script src="boot.js"></script>*@

    <!-- Defines the "Save As" extension template. -->
    <script type="text/html" id="dx-save-as-form">
        <div>Dashboard Name:</div>
        <div style="margin: 10px 0" data-bind="dxTextBox: { value: newName }"></div>
        <div data-bind="dxButton: { text: 'Save', onClick: saveAs }"></div>
    </script>

    @*<script type="text/javascript">
    function onBeforeRender(sender) {
    var dashboardControl = sender;
    dashboardControl.registerExtension(new SaveAsDashboardExtension(dashboardControl));
    dashboardControl.registerExtension(new DeleteDashboardExtension(dashboardControl));
    }
    </script>*@
</head>
<body>
    <!-- https://stackoverflow.com/questions/59779601/auto-reconnect-blazor-serverside -->
    <!-- Note: .Net 6+ solution -->
    <!-- https://stackoverflow.com/questions/60031791/how-to-deploy-blazor-server-in-production-and-overcome-signalr-re-connection-pro/60031891#60031891 -->
    @*<script src="_framework/blazor.server.js" autostart="false"></script>
    <script src="boot.js"></script>*@

    @*<script src="_framework/blazor.server.js"></script>
    <script>
    Blazor.defaultReconnectionHandler._reconnectCallback = function (d) {
    document.location.reload();
    }
    </script>*@

    <app>
        <component type="typeof(App)" render-mode="ServerPrerendered" />
    </app>

    <div id="reconnect-modal" style="display: none;"></div>

    <div id="blazor-error-ui">
        <environment include="Staging,Production">
            An error has occurred. This application may no longer respond until reloaded.
        </environment>
        <environment include="Development">
            An unhandled exception has occurred. See browser dev tools for details.
        </environment>
        <a href="" class="reload">Reload</a>
        <a class="dismiss">🗙</a>
    </div>

    @*<script src="_framework/blazor.server.js"></script>*@

    @*<script src="js/site.min.js"></script>
    <script type="text/javascript" src="js/SaveAsExtension.js"></script>
    <script type="text/javascript" src="js/DeleteExtension.js"></script>*@

    @* Adds icons for a custom toolbar item: *@
    <div style="display: none;">
        <svg id="baseCircle" class="dx-dashboard-icon" style="fill: currentColor" viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="11" /></svg>
        <svg id="greenCircle" class="dx-dashboard-green-icon" viewBox="0 0 24 24" width="48" height="48"><circle cx="12" cy="12" r="11" /></svg>
        <svg id="yellowCircle" class="dx-dashboard-yellow-icon" viewBox="0 0 24 24" width="48" height="48"><circle cx="12" cy="12" r="11" /></svg>
        <svg id="redCircle" class="dx-dashboard-red-icon" viewBox="0 0 24 24" width="48" height="48"><circle cx="12" cy="12" r="11" /></svg>
    </div>
</body>
</html>
